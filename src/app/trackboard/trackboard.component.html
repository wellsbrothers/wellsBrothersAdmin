<header>
  <nav class="navbar navbar-expand-lg navbar-light bg-c pt-0 pb-0">
    <a class="navbar-brand" href="#">
      <img src="assets/images/logo-white.svg" class="img-responsive" alt="">
    </a>
    <button class="navbar-toggler text-light">
      <svg width="1em" height="1em" (click)="showHeadeDropdown = !showHeadeDropdown" viewBox="0 0 16 16" class="bi bi-person-fill" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
        <path fill-rule="evenodd" d="M3 14s-1 0-1-1 1-4 6-4 6 3 6 4-1 1-1 1H3zm5-6a3 3 0 1 0 0-6 3 3 0 0 0 0 6z"/>
      </svg>
    </button>
    <div class="collapse navbar-collapse my-2 my-lg-0" id="navbarNavDropdown" [ngClass]="showHeadeDropdown ? 'show' : ''">
      <ul class="navbar-nav ml-auto" >
        <li class="nav-item dropdown" [ngClass]="showHeadeDropdown ? 'show' : ''">
          <a class="nav-link text-light dropdown-toggle d-user" href="javascript:void(0)" (click)="showHeadeDropdown = !showHeadeDropdown">
            <svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-person-fill" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
              <path fill-rule="evenodd" d="M3 14s-1 0-1-1 1-4 6-4 6 3 6 4-1 1-1 1H3zm5-6a3 3 0 1 0 0-6 3 3 0 0 0 0 6z"/>
            </svg>
          </a>
          <div class="dropdown-menu" [ngClass]="showHeadeDropdown ? 'show' : ''" id="userDropdown" >
            <a class="dropdown-item" [routerLinkActive]="['active']" [routerLink]="['/dashboard']">Dashboard</a>
            <a class="dropdown-item" [routerLinkActive]="['active']" [routerLink]="['/trackboard']"  *ngIf="showTrackBoard">Trackboard</a>
            <a class="dropdown-item" [routerLinkActive]="['active']" [routerLink]="['/admin/my-page']"  *ngIf="role !== 2">My Page</a>
            <a class="dropdown-item" href="javascript:void(0)" (click)="logout()">Log Out</a>
          </div>
        </li>
      </ul>
    </div>
  </nav>
</header>

<section>
  <div class="container-fluid">
    <div class="row no-margin">
      <div class="col-12 pb-1">
        <div class="row mt-4">
          <div class="card w-100">
            <div class="card-header">
              <h5>TrackBoard</h5>
            </div>
            <div class="card-body">
              <div class="col-12 table-responsive">
                <table class="table table-bordered" *ngIf="tracks && tracks.length > 0">
                  <thead>
                  <tr>
                    <th class="th"
                        (click)="search.sortBy = 'loaddAdmin.username'; sort(0)" [ngClass]="searchTD[0] ? 'asc' : 'desc'"
                        scope="col">Dispacher</th>
                    <th class="th"
                        (click)="search.sortBy = 'companyName'; sort(1)" [ngClass]="searchTD[1] ? 'asc' : 'desc'"
                        scope="col">Carrier</th>
                    <th class="th"
                        (click)="search.sortBy = 'phone'; sort(2)" [ngClass]="searchTD[2] ? 'asc' : 'desc'"
                        scope="col">PhoneNum</th>
                    <th class="th"
                        (click)="search.sortBy = 'loads.sheeper.address'; sort(3)" [ngClass]="searchTD[3] ? 'asc' : 'desc'"
                        scope="col">City</th>
                    <th class="th"
                        (click)="search.sortBy = 'loads.sheeper.address'; sort(4)" [ngClass]="searchTD[4] ? 'asc' : 'desc'"
                        scope="col">State</th>
                    <th class="th"
                        (click)="search.sortBy = 'loads.consignee.date'; sort(5)" [ngClass]="searchTD[5] ? 'asc' : 'desc'"
                        scope="col">Avail Date</th>
                    <th class="th"
                        (click)="search.sortBy = 'loads.consignee.address'; sort(6)" [ngClass]="searchTD[6] ? 'asc' : 'desc'"
                        scope="col">WTG</th>
                  </tr>
                  </thead>
                  <tbody>
                  <tr *ngFor="let track of tracks">
                    <td *ngIf="track.loaddAdmin[0]">
                      {{track.loaddAdmin[0].username}} - {{track.loaddAdmin[0].note}}
                    </td>
                    <td *ngIf="!track.loaddAdmin[0]">
                      -
                    </td>
                    <td>{{track.companyName}}</td>
                    <td>{{track.phone}}</td>
                    <td *ngIf="track.loads[0]">
                      {{getLastSheeper(track.loads[0].sheeper).address.split(',')[1]}}
                    </td>
                    <td *ngIf="!track.loads[0]">
                      -
                    </td>
                    <td *ngIf="track.loads[0]">
                      {{getLastSheeper(track.loads[0].sheeper).address.split(',')[2]}}
                    </td>
                    <td *ngIf="!track.loads[0]">
                      -
                    </td>
                    <td *ngIf="track.loads[0]">
                      {{getLastConsignee(track.loads[0].consignee).date | date: 'MM-dd-yyyy'}}
                    </td>
                    <td *ngIf="!track.loads[0]">
                      -
                    </td>
                    <td *ngIf="track.loads[0]">
                      {{getLastConsignee(track.loads[0].consignee).address.split(',')[1]}} -
                      {{getLastConsignee(track.loads[0].consignee).address.split(',')[2]}}
                    </td>
                    <td *ngIf="!track.loads[0]">
                      -
                    </td>
                  </tr>
                  </tbody>
                </table>
              </div>
              <div class="col-xl-12 col-lg-12 col-md-12 col-xs-12 col-12">
                <div class="row no-margin justify-content-end"  *ngIf="total > limit">
                  <app-pagination
                    [count]="total"
                    [page]="page"
                    [perPage]="limit"
                    [pagesToShow]="5"
                    (goPrev)="prev()"
                    (goNext)="next()"
                    (goPage)="currentpage($event)">
                  </app-pagination>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>
